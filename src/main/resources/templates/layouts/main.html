<!DOCTYPE html>
<html lang="en"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title th:text="#{label.pages.home.title}">Title</title>
	
	    <link th:href="@{/assets/font-awesome/css/font-awesome.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/simple-line-icons/simple-line-icons.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/bootstrap.min.css}" rel="stylesheet" type="text/css" />
        <!-- <link th:href="@{/assets/css/scrolling-nav.css}" rel="stylesheet"> -->
        <link th:href="@{/assets/css/style.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/bootstrap-dialog/css/bootstrap-dialog.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/profile.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/bootstrap-datetimepicker.min.css}" rel="stylesheet" type="text/css" />
		<link th:href="@{/assets/css/animate.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/bootstrap-switch.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/sticky-footer.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/components-md.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/summernote/css/summernote.css}" rel="stylesheet" type="text/css" />
        <!-- <link th:href="@{/assets/css/sticky-footer.css}" rel="stylesheet" type="text/css" /> -->
        <link th:href="@{/assets/css/navbar.css}" rel="stylesheet" type="text/css" />
		
	<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css' />	
	<link href='https://fonts.googleapis.com/css?family=Exo' rel='stylesheet' type='text/css' />
	
	<!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	
	<style th:inline="text">
	    .password-verdict{
			color:#000;
		}
	</style>
	<link rel="shortcut icon" th:href="@{/assets/images/eLearning_Favicon.png}" />
</head>
<body>
		<!-- Fixed navbar -->
        <nav id="main_navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header page-scroll">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand page-scroll" th:href="@{/home}">DIA eLearning</a>
                </div>
                <div id="main_navbar_items" class="navbar-collapse collapse">
                    
                    <ul class="nav navbar-nav">
                        <li class="active" th:class="${controllerName == 'Home'} ? 'dropdown active' : 'dropdown'"><a th:href="@{/home}" >Home</a></li>
                        
                        <li sec:authorize="hasAuthority('STUDENT_PRIVILEGE')" class="dropdown" th:class="${#httpServletRequest.getAttribute('controllerName') == 'Student'} ? 'dropdown active' : 'dropdown'">
					            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Assignment<span class="caret"></span></a>
					            <ul class="dropdown-menu">
					                <li><a th:href="@{/student/assignments}"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>My Assignment</a></li>
					                <!-- <li><a th:href="@{/authorizationDocumentUpload}">Authorization Document Upload</a></li>				                
					                <li><a th:href="@{/answerUpload}">Answer Submission</a></li> -->
					            </ul>
					    </li>
					    
					    
					    <li sec:authorize="hasAuthority('TEACHER_PRIVILEGE')" class="dropdown" th:class="${#httpServletRequest.getAttribute('controllerName') == 'Teacher'} ? 'dropdown active' : 'dropdown'">
					            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Assignment<span class="caret"></span></a>
					            <ul class="dropdown-menu">
					                <li><a th:href="@{/teacher/assignment}"><i class="fa fa-plus-circle"></i> Create Assignment</a></li>
					                <li><a th:href="@{/teacher/assignments(page = 1,sortString=id,oldDirection=${oldDirection},oldSortString=${oldSortString})}"><i class="fa fa-eye"></i> View Assignments</a></li>
					                <li><a th:href="@{/teacher/group}"><i class="fa fa-plus-circle" aria-hidden="true"></i> Create Group</a></li>				                
					                <li><a th:href="@{/teacher/groups}"><i class="fa fa-users"></i> Group List</a></li>
					            </ul>
					    </li>
					    
					    
					    <li sec:authorize="hasAuthority('ADMIN_PRIVILEGE')" class="dropdown" th:class="${#httpServletRequest.getAttribute('controllerName') == 'Admin'} ? 'dropdown active' : 'dropdown'">
					            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Admin<span class="caret"></span></a>
					            <ul class="dropdown-menu">
					                <li><a th:href="@{/admin/createUser}"><i class="fa fa-plus-circle"></i>Create User</a></li>
					                <li><a th:href="@{/admin/allUsers}"><i class="fa fa-users"></i>All Users</a></li>
					               <!--  <li><a th:href="@{/authorizationDocumentUpload}">Authorization Document Upload</a></li>				                
					                <li><a th:href="@{/answerUpload}">Answer Submission</a></li> -->
					            </ul>
					    </li>
					    
					        
                    </ul>
                    				    
				    <!-- BEGIN TOP NAVIGATION MENU -->
                    <div class="top-menu">
					
                        <ul class="nav navbar-nav pull-right">
						
                            <!-- BEGIN USER LOGIN DROPDOWN -->
                            <li class="dropdown dropdown-user dropdown-dark" th:class="${#httpServletRequest.getAttribute('controllerName') == 'User'} ? 'dropdown active' : 'dropdown'">
                                <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                                    <!-- <img alt="" class="img-circle" th:src="@{assets/img/avatar9.jpg}" /> -->
                                    <img th:src="@{/user/avatar/image}" class="img-round-small" alt="" width="18" height="18"/>
                                    <!-- <img th:attr="src=|/user/avatar/image/${session.user}|" class="img-circle" alt="" width="30" height="30"/> -->
                                    
                                    <span class="username username-hide-mobile" th:text="${#authentication.name}">user</span>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-default">
                                    <li>
                                        	<!-- <a href="#" th:onclick="'javascript:userProfile();'" > -->
                                        	<a th:href="@{/userProfile}">
                                            <i class="icon-user"></i>My Profile</a>
                                    </li>
                                    <!-- <li>
                                        	<a href="#" th:onclick="'javascript:updatePassword();'">
                                        	<a th:href="@{/changePassword}">
                                            <i class="icon-lock"></i>Change Password</a>
                                    </li> -->
                                    <li>
                                        <a th:href="@{/logout}">
                                            <i class="icon-key"></i>Log Out 
                                        </a>
                                        <!-- <a th:href="@{/logout}" th:text="#{label.pages.logout}">
                                         	<i class="icon-key"></i>
                                        </a> -->
                                    </li>
                                </ul>
                            </li>
                            <!-- END USER LOGIN DROPDOWN -->
                            <!-- BEGIN QUICK SIDEBAR TOGGLER -->
                            
                            <!-- END QUICK SIDEBAR TOGGLER -->
                        </ul>
                    </div>
                    <!-- END TOP NAVIGATION MENU -->
                    
				    
                </div><!-- /.nav-collapse -->
            </div><!-- /.container -->
        </nav><!-- /.navbar -->
        
        
        

        <div class="container">

           	
			
		<div layout:fragment="content">

			
		</div>
		
            

            <footer class="footer">
                <div class="container"> 
                <span class="text-muted">2016 &copy;
                	<a  href="http://daffodil.ac/" target="_blank">Daffodil International Academy (DIA)</a>
                </span>
            	</div>
            </footer>
            
		     
		


	</div><!--/.container-->

    <script th:src="@{/assets/js/jquery.min.js}" type="text/javascript"></script>
    <script th:src="@{/assets/js/bootstrap.min.js}" type="text/javascript"></script>
    <script th:src="@{/assets/js/moment.min.js}"></script>
    <!-- <script th:src="@{/assets/js/navberTransition.js}" type="text/javascript"></script> -->
    <script th:src="@{/assets/js/bootstrap-datetimepicker.js}"></script>
	<script th:src="@{/assets/js/pwstrength.js}"></script>
    <script th:src="@{/assets/js/bootstrap-notify.min.js}"></script>
    <script th:src="@{/assets/bootstrap-dialog/js/bootstrap-dialog.min.js}"></script>
    
    <script th:src="@{/assets/js/bootstrap-hover-dropdown.min.js}"></script>
    <script th:src="@{/assets/js/scrolling-nav.js}"></script>
    <script th:src="@{/assets/summernote/js/summernote.js}"></script>
    
    <script th:src="@{/assets/js/multiselect.min.js}"></script>
    
    <!-- Custom Javascript -->
    <!-- <script th:src="@{/assets/js/custom_js/dropzoneApp.js}" type="text/javascript"></script> -->
    <script th:src="@{/assets/js/custom_js/userController.js}" type="text/javascript"></script>
    <script th:src="@{/assets/js/custom_js/custom_summernote.js}"></script>
     
   
    
   <th:block layout:fragment="script"></th:block>
   
   
<script th:inline="javascript">
/*<![CDATA[*/
         
var serverContext = [[@{/}]];    
	
           
$(document).ready(function() {

    $('#search').multiselect({
        search: {
            left: '<input type="text" name="q" class="form-control" placeholder="Search..." />',
            right: '<input type="text" name="q" class="form-control" placeholder="Search..." />',
        },fireSearch: function(value) {
            return value.length > 3;
        }
    });
});


$(function () {
	  $('[data-toggle="tooltip"]').tooltip()
})
	

/* function retrieveGroupUsers() {
		 var url = serverContext + 'teacher/groups';
		 if ($('#search').val() != '') {
		    url = url + '/' + $('#search').val();
		 }
		 $("#resultsBlock").load(url);
} */

function retrieveGroupUsers() {
	 var url = serverContext + 'teacher/groups';
	 if ($('#search').val() != '') {
	    url = url + '/' + $('#search').val();
	 }
	 $.ajax({
			url:url,
			dataType: "json",
			type : "get",
			success : function(data) {
				/* console.log(data);  */
				  $("#search_to option").remove();
				  $.map( data, function(item) {
					  /* console.log("item: "+item+"--->item id:"+item.id+" item email: "+item.email); */
					  $('#search_to').append($('<option>', { 
					        value: item.id,
					        text : item.email 
					  }));
			      });
			}
		});
}

function editGroup(){
	
	var url = serverContext + 'teacher/editGroups';
	console.log("Value: "+$('#search').val());
	if ($('#search').val() != '') {
        url = url + '/' + $('#search').val();
    }
    
    $.get(url,function(){
    	window.location.href = url;
    	/* successMsg( "success" ); */
    }).fail(function() {
        
    	errorMsg("Please select group");
        
    });
}

var date = new Date();
date.setDate(date.getDate()-1);

$('.form_date').datetimepicker({
    use24hours: true,
    startDate: date,
    weekStart: 1,
    todayBtn:  1,
	autoclose: 1,
	todayHighlight: 1,
	startView: 2,
	forceParse: 0,
    showMeridian: 1
});



$(document).ready(function () {
    
	$('#groupForm').submit(function(event) {
		saveGroup(event);
    });
    
});


function saveGroup(event){
	
    event.preventDefault();
        
    var formData= $('#groupForm').serialize();
    
    $.post(serverContext + "teacher/group/save",formData ,function(data){
    	successMsg(data.message);
    	
    }).fail(function(data) {
        if(data.responseJSON.error.indexOf("InternalError") > -1){
        	errorMsg(data.responseJSON.message);
        }else if(data.responseJSON.error == "GroupNameAlreadyExist"){
        	 errorMsg(data.responseJSON.message);
        }else{
        	var errors = $.parseJSON(data.responseJSON.message);
            $.each( errors, function( index,item ){
                errorMsg(item.defaultMessage);
            });
        }
    });
}


function successMsg(msg){
	
	$.notify(msg, {
		icon: 'glyphicon glyphicon-ok-circle',
		type: "success",
		placement: {
			from: "top",
			align: "right"
		},
		offset: 20,
		spacing: 10,
		z_index: 1031,
		delay: 5000,
		timer: 1000,
		delay: 5000,
		animate: {
			enter: 'animated fadeInDown',
			exit: 'animated fadeOutUp'
		},
		newest_on_top: true
	});
}

function errorMsg(msg){
	
	$.notify(msg, {
		type: "danger",
		icon: 'glyphicon glyphicon-warning-sign',
		delay: 5000,
		placement: {
			from: "top",
			align: "right"
		},
		offset: 20,
		spacing: 10,
		z_index: 1031,
		delay: 5000,
		timer: 1000,
		delay: 5000,
		animate: {
			enter: 'animated fadeInDown',
			exit: 'animated fadeOutUp'
		},
		newest_on_top: true
	});
	
}

/*]]>*/ 

</script>
  	
</body>
</html>